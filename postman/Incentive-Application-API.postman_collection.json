{
	"info": {
		"_postman_id": "incentive-application-api",
		"name": "Incentive Application API",
		"description": "Entrepreneur Incentive Application APIs with document upload and submit workflow.\n\nApplication IDs are generated in format: UNIT-{userId}-{year}-{sequence} (e.g., UNIT-1-2026-001).\n\nOnly USER role can create/update/submit applications.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:9003",
			"type": "string"
		},
		{
			"key": "token",
			"value": "",
			"type": "string"
		},
		{
			"key": "applicationId",
			"value": "",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Login as User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.token) {",
									"    pm.collectionVariables.set('token', jsonData.token);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"login\": \"entrepreneur@example.com\",\n    \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/login",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "login"]
						}
					}
				}
			]
		},
		{
			"name": "Application Workflow",
			"item": [
				{
					"name": "1. Create Application (DRAFT)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.id) {",
									"    pm.collectionVariables.set('applicationId', jsonData.id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"unitName\": \"ABC Industries Pvt Ltd\",\n    \"gstin\": \"12AAAAA0000A1Z5\",\n    \"udhyamNumber\": \"UDYAM-AR-00-0000001\",\n    \"investmentAmount\": 5000000.00,\n    \"employmentCommitment\": 50,\n    \"factoryLocation\": \"Plot No. 45, Industrial Estate\",\n    \"factoryDistrict\": \"Papum Pare\",\n    \"factoryState\": \"Arunachal Pradesh\",\n    \"factoryPoliceStation\": \"Naharlagun PS\",\n    \"factoryMobile\": \"9876543210\",\n    \"factoryEmail\": \"factory@abc.com\",\n    \"officeLocation\": \"Sector 5, Itanagar\",\n    \"officeDistrict\": \"Papum Pare\",\n    \"officeState\": \"Arunachal Pradesh\",\n    \"officePoliceStation\": \"Itanagar PS\",\n    \"officeMobile\": \"9876543211\",\n    \"officeEmail\": \"office@abc.com\",\n    \"declarationAccepted\": true\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/applications",
							"host": ["{{baseUrl}}"],
							"path": ["api", "applications"]
						},
						"description": "Create a new incentive application. Status defaults to DRAFT. ID generated as UNIT-{userId}-{year}-{sequence}."
					}
				},
				{
					"name": "2. Update Application",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"unitName\": \"ABC Industries Pvt Ltd - Updated\",\n    \"gstin\": \"12AAAAA0000A1Z5\",\n    \"udhyamNumber\": \"UDYAM-AR-00-0000001\",\n    \"investmentAmount\": 7500000.00,\n    \"employmentCommitment\": 75,\n    \"factoryLocation\": \"Plot No. 45, Industrial Estate Phase-II\",\n    \"factoryDistrict\": \"Papum Pare\",\n    \"factoryState\": \"Arunachal Pradesh\",\n    \"factoryPoliceStation\": \"Naharlagun PS\",\n    \"factoryMobile\": \"9876543210\",\n    \"factoryEmail\": \"factory@abc.com\",\n    \"officeLocation\": \"Sector 5, Itanagar\",\n    \"officeDistrict\": \"Papum Pare\",\n    \"officeState\": \"Arunachal Pradesh\",\n    \"officePoliceStation\": \"Itanagar PS\",\n    \"officeMobile\": \"9876543211\",\n    \"officeEmail\": \"office@abc.com\",\n    \"declarationAccepted\": true\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/applications/{{applicationId}}",
							"host": ["{{baseUrl}}"],
							"path": ["api", "applications", "{{applicationId}}"]
						},
						"description": "Update application details. Only DRAFT applications can be updated."
					}
				},
				{
					"name": "3. Upload Document - GST Certificate",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": ""
								},
								{
									"key": "documentType",
									"value": "GST_CERTIFICATE",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/applications/{{applicationId}}/upload?documentType=GST_CERTIFICATE",
							"host": ["{{baseUrl}}"],
							"path": ["api", "applications", "{{applicationId}}", "upload"],
							"query": [
								{
									"key": "documentType",
									"value": "GST_CERTIFICATE"
								}
							]
						},
						"description": "Upload GST Certificate document. Allowed types: GST_CERTIFICATE, UDYAM_CERTIFICATE, BANK_STATEMENT."
					}
				},
				{
					"name": "3. Upload Document - Udyam Certificate",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": ""
								},
								{
									"key": "documentType",
									"value": "UDYAM_CERTIFICATE",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/applications/{{applicationId}}/upload?documentType=UDYAM_CERTIFICATE",
							"host": ["{{baseUrl}}"],
							"path": ["api", "applications", "{{applicationId}}", "upload"],
							"query": [
								{
									"key": "documentType",
									"value": "UDYAM_CERTIFICATE"
								}
							]
						},
						"description": "Upload Udyam Certificate document."
					}
				},
				{
					"name": "3. Upload Document - Bank Statement",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": ""
								},
								{
									"key": "documentType",
									"value": "BANK_STATEMENT",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/applications/{{applicationId}}/upload?documentType=BANK_STATEMENT",
							"host": ["{{baseUrl}}"],
							"path": ["api", "applications", "{{applicationId}}", "upload"],
							"query": [
								{
									"key": "documentType",
									"value": "BANK_STATEMENT"
								}
							]
						},
						"description": "Upload Bank Statement document."
					}
				},
				{
					"name": "4. Submit Application",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/applications/{{applicationId}}/submit",
							"host": ["{{baseUrl}}"],
							"path": ["api", "applications", "{{applicationId}}", "submit"]
						},
						"description": "Submit application. Validates:\n- declarationAccepted = true\n- At least 1 document uploaded\n\nStatus changes from DRAFT to SUBMITTED."
					}
				}
			],
			"description": "Complete workflow: Create DRAFT → Upload Documents → Submit"
		},
		{
			"name": "Query APIs",
			"item": [
				{
					"name": "Get Application by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/applications/{{applicationId}}",
							"host": ["{{baseUrl}}"],
							"path": ["api", "applications", "{{applicationId}}"]
						},
						"description": "Get full application details including uploaded documents."
					}
				},
				{
					"name": "Get All Applications (Paginated)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/applications?page=0&size=10",
							"host": ["{{baseUrl}}"],
							"path": ["api", "applications"],
							"query": [
								{
									"key": "page",
									"value": "0"
								},
								{
									"key": "size",
									"value": "10"
								}
							]
						},
						"description": "List all applications with pagination."
					}
				},
				{
					"name": "Get My Applications",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/applications/my?page=0&size=10",
							"host": ["{{baseUrl}}"],
							"path": ["api", "applications", "my"],
							"query": [
								{
									"key": "page",
									"value": "0"
								},
								{
									"key": "size",
									"value": "10"
								}
							]
						},
						"description": "Get applications for the logged-in user with pagination."
					}
				}
			],
			"description": "Query and list applications."
		}
	]
}
